import{_ as L}from"./Czi8emjL.js";import{l as c,u as A,p as E,i as U,f as H,c as l,a as e,q as b,h as r,d as y,n as C,v as M,s as w,x as S,F as _,r as k,y as V,t as i,o as a,z as T,b as q,w as D}from"./Bd8ljqR2.js";import{u as I}from"./BOh-c-DE.js";import{u as G}from"./C8SpssaU.js";const J={class:"min-h-screen flex flex-col items-center bg-gray-100"},K={class:"flex p-2 w-full md:w-full lg:w-[75vw] flex-col xs:flex-col sm:flex-col sm:flex-row md:flex-row lg:flex-row sm:gap-4 md:gap-4 lg:gap-8 mt-2 md:mt-10"},O={class:"w-full mb-5 sm:w-[30%] md:w-[25%] lg:w-[22%] shrink-0 space-y-6 bg-white p-4 rounded h-fit"},Q={class:"flex justify-between items-center w-full h-[40px]"},W={class:"space-y-4 mt-10 sm:mt-0 transition-all duration-300 ease-in-out"},X={class:"space-y-1"},Y={class:"flex items-center justify-between cursor-pointer text-sm font-medium text-gray-700 px-3 py-2 hover:bg-gray-50"},Z={key:0,class:"space-y-1 px-4 py-2"},ee=["value"],te={key:1,class:"px-4 py-2 text-sm text-gray-500"},se={class:"sm:w-full flex items-center flex-col"},oe={key:0,class:"text-red-500 text-center mb-4"},le={class:"grid lg:w-[55vw] grid-cols-2 xs:grid-cols-3 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 gap-5"},ae={class:"relative"},re={key:0,class:"absolute top-0 left-0 bg-red-500 text-white text-xs font-semibold px-2 py-1 rounded-br-lg"},ie={key:1,class:"absolute top-0 left-0 bg-yellow-500 text-white text-xs font-semibold px-2 py-1 rounded-br-lg"},ne={key:2,class:"absolute top-0 left-0 bg-yellow-500 text-white text-xs font-semibold px-2 py-1 rounded-br-lg"},de={class:"overflow-hidden"},ce=["src","alt"],ue={class:"mt-2 md:absolute md:mt-0 inset-0 flex items-center justify-center gap-3 md:opacity-0 md:group-hover:opacity-100 md:transition md:bg-black/40"},me=["onClick","disabled"],xe={class:"p-4 text-center"},fe={class:"text-md font-semibold text-gray-800 truncate"},ge={class:"text-sm text-gray-500 font-semibold"},be={class:"text-sm text-gray-500 font-semibold"},_e={__name:"index",setup(ye){const $=I(),N=U(),u=c([]),v=c(null),z=A();E(async()=>{try{const o=await $fetch(`${N.public.apiBase}/parent-categories`);Array.isArray(o)?u.value=o:o&&Array.isArray(o.data)?u.value=o.data:u.value=[],console.log("Parent categories:",u.value)}catch(o){console.error("Error fetching parent categories:",o),v.value="Eroare la încărcarea categoriilor."}});const n=c([]),m=c(""),d=c(0),x=c(!0),P=H(()=>z.items.filter(o=>{var f;const s=o.name.toLowerCase().includes(m.value.toLowerCase()),p=d.value>0?Number(o.price)<=d.value:!0,t=n.value.length===0||((f=o.categories)==null?void 0:f.some(g=>n.value.includes(g.id)));return s&&p&&t}));function j(o){return o.image_url?`${N.public.apiBase}/${o.image_url}`:""}function F(o){$.add(o)}function R(){m.value="",d.value=0,n.value=[]}return G({title:"Produse - Hidroserv",meta:[{name:"description",content:"Vezi lista de produse oferite de Hidroserv Reparatii Capital SRL."}]}),(o,s)=>{const p=L;return a(),l("div",J,[e("div",K,[e("aside",O,[e("div",{class:"sm:hidden h-[10px] cursor-pointer",onClick:s[0]||(s[0]=t=>x.value=!r(x))},[e("div",Q,[s[4]||(s[4]=e("h2",{class:"text-base font-semibold text-gray-800 flex items-center gap-2"},[e("i",{class:"fas fa-sliders-h text-sm"}),y(" Filtrează ")],-1)),e("i",{class:C([r(x)?"fas fa-chevron-up":"fas fa-chevron-down","text-xs text-gray-600"])},null,2)])]),s[9]||(s[9]=e("h2",{class:"hidden text-base font-semibold text-gray-800 sm:flex items-center gap-2"},[e("i",{class:"fas fa-sliders-h text-sm"}),y(" Filtrează ")],-1)),b(e("div",W,[e("div",null,[s[5]||(s[5]=e("label",{class:"text-sm text-gray-600 font-medium"},"Caută",-1)),b(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>w(m)?m.value=t:null),type:"text",placeholder:"Caută produse...",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm bg-white focus:outline-none focus:ring-2 focus:ring-cyan-600"},null,512),[[S,r(m)]])]),e("div",null,[s[6]||(s[6]=e("label",{class:"text-sm text-gray-600 font-medium"},"Preț maxim",-1)),b(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>w(d)?d.value=t:null),type:"number",min:"0",placeholder:"Ex: 200",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm bg-white focus:outline-none focus:ring-2 focus:ring-cyan-600"},null,512),[[S,r(d)]])]),e("div",null,[e("div",{class:"flex items-center justify-between mb-1"},[s[7]||(s[7]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Categorii",-1)),e("button",{onClick:R,class:"text-xs text-cyan-600 hover:underline"},"Resetează")]),e("div",X,[(a(!0),l(_,null,k(r(u),(t,f)=>{var g;return a(),l("details",{key:t==null?void 0:t.id,class:"border border-gray-200 rounded-md overflow-hidden"},[e("summary",Y,[y(i(t.name)+" ",1),s[8]||(s[8]=e("span",{class:"text-xs text-gray-400"},"+",-1))]),t.children&&((g=t.children[0])==null?void 0:g.id)!==null?(a(),l("div",Z,[(a(!0),l(_,null,k(t.children,h=>(a(),l("label",{key:h.id,class:"flex items-center gap-2 text-sm text-gray-600"},[b(e("input",{type:"checkbox",value:h.id,"onUpdate:modelValue":s[3]||(s[3]=B=>w(n)?n.value=B:null),class:"accent-cyan-600"},null,8,ee),[[T,r(n)]]),y(" "+i(h.name),1)]))),128))])):(a(),l("div",te,"Nicio subcategorie."))])}),128))])])],512),[[M,r(x)]])]),e("div",se,[r(v)?(a(),l("div",oe,i(r(v)),1)):V("",!0),e("div",le,[(a(!0),l(_,null,k(r(P),t=>(a(),l("div",{key:t.id,class:"bg-white mb-4 max-w-[170px] sm:max-w-full rounded overflow-hidden shadow-sm hover:shadow-md transition duration-300 group"},[e("div",ae,[e("div",null,[Number(t.stock)===0?(a(),l("div",re," Stoc epuizat ")):Number(t.stock)>1&&Number(t.stock)<=10?(a(),l("div",ie," ultimele "+i(t.stock)+" produse ",1)):Number(t.stock)===1?(a(),l("div",ne," Ultimul produs ")):V("",!0)]),e("div",de,[e("img",{src:j(t),alt:t.name,class:"aspect-square object-cover w-full transition-transform duration-300"},null,8,ce)]),e("div",ue,[q(p,{to:`/${t.slug}/${t.id}`,class:"bg-cyan-600 text-white h-8 w-8 flex items-center justify-center rounded-full hover:bg-cyan-600"},{default:D(()=>s[10]||(s[10]=[e("i",{class:"fas fa-search"},null,-1)])),_:2},1032,["to"]),e("button",{onClick:f=>F(t),class:C(Number(t.stock)>0?"bg-cyan-600 h-8 w-8 text-white rounded-full hover:bg-cyan-700":"bg-slate-600 h-8 w-8 text-white rounded-full hover:bg-slate-700 cursor-not-allowed"),disabled:Number(t.stock)===0},s[11]||(s[11]=[e("i",{class:"fas fa-shopping-cart"},null,-1)]),10,me)])]),e("div",xe,[e("h2",fe,i(t.name),1),e("p",ge,"stoc: "+i(t.stock),1),e("p",be,i(t.price)+" Ron",1)])]))),128))])])])])}}};export{_e as default};
